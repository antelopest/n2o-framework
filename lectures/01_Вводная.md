# N2O

### Общее

N2O - UI конструктор с элементами Low-Code*.

> Low-Code - это подход к созданию, настройке и модификации систем и приложений, который практически не требует написания
программного кода.

На N2O не нужно писать код: UI, биндинг, обращение к graphql.
N2O декларативный. Отсутствует императивная логика.

> Декларативное программирование - парадигма программирования, в которой задается спецификация решения задачи, то есть
> описывается ожидаемый результат, а не способ его получения. Пример, декларативных языков HTML и SQL.

> Императивное программирование - парадигма программирования, для которой характерно, что в исходном коде программы
> записываются инструкции, которые выполняются последовательно, данные, получаемые при выполнении предыдущих инструкций,
> могут читаться из памяти последующими инструкциями, данные, полученные при выполнении инструкций, могут записываться 
> в память.

### Выгода N2O

На N2O можно писать очень быстро.

Есть моменты, где N2O не выигрывает в скорости:
* Нетипичные интерфейсы, логика.
* Редкие кейсы использования вызывают баги.
* Воркэраунд решения.
* Кастомизация.
* Переусложненность решения.
* Неочевидные ограничения.

### Зависимости

Для развертывания необходимо:
* Maven.
* Java 11..14.
* Spring Boot Starter Parent 2.2.7 RELEASE.
* N2O-BFF 1.0.0
* CS-APP-STATIC OR BO-APP-STATIC (STATIC FILES REACT (отличие в стилях))
* N2O FRAMEWORK 7.22.1

XML файлы хранятся по пути: src/main/resources/META-INF/conf

Расширения, генераторы XML: src/main/java

Настройка n2o.config.path = на папку META-INF/conf

Свойства application.properties

Сборка с помощью maven

### Запуск

java -jar demo-1.0.jar -n2o.config.path

http://localhost:8080 - index.html

http://localhost:8080/n2o/config - menu + userinfo

http://localhost:8080/n2o/page - xml

http://localhost:8080/n2o/data - graphql

### Автоматическое подхватывание

java -jar demo-1.0.jar -n2o.config.path=../META-INF/conf
JSON файлы, файлы статики не подхватываются, нужна пересборка и перезапуск

### Архитектура

XML превращаются в JSON структуру React компонентов

Три уровня кеша:
* Кеш на уровне чтения в java объекты.
* Кеш на уровне обогащения в json объекты (компиляция).
* Кеш на уровне клиента 304 Not Modified.

### Основные понятия

#### Файлы XML

Типы метаданных.

Уникальность имени.

Хранение: дефолтные, класспаф, на диске, кастом.

#### Повторное использование

Можно вынести в файлы: виджет, филдсет
Композитные компоненты (карточка персоны, адресные данные, документы, контакты)
Переопределение свойства (req-id)

#### Параметранизация

#### Резолвинг

#### Можно менять настройки для компонентов

n2o.properties

### Иерархия компонентов

Не все компоненты друг в друга вкладываются, набор свойств не одинаковый.

Страницы, регионы, виджеты, поля, кнопки, ячейки.

Частиц нет, самые маленькие компоненты - это контролы и ячейки.

Страницы бывают разные, плейсы.

Поля только в форме (и фильтрах таблицы).

> Форма в регионе. Регион не может быть в форме. Нельзя положить поле в регион.
> 
> Вкладки - это регион, он не может быть в форме.
> 
> Виджеты получают данные.
> 
> У регионов нет доступа к данным.

#### Отсутствуют циклы

Вместо циклов виджеты: таблица, дерево.

На форме мультфилдсеты.

Если есть где-то итерация по данным, то это новый виджет (кастом).

Есть возможность генерации XML по данным на сервере.

#### Есть "одинаковые" компоненты, но на разных уровнях иерархии

Это разные компоненты.
Зависимости работают на разных уровнях по разному.

#### Биндинг, связывание с данными

Датасорс есть не у всех элементов.

Датасорс - это место хранения и способ получения данных.

Датасорс с выборкой.

Датасорс со значениями по умолчанию.

Датасорс с вебсокетами.

Датасорс со storage.

Датасорс есть у всех виджетов.

#### Связь формы с выборкой и объектом

Связь через датасорс.

Датасорс и редакс.

Датасорс можеть быть один на несколько форм.

У таблицы и у формы должен быть разный датасорс.

#### Редакс модель

Модель данных models.resolve.widget.field.

Виды моделей:
* datasource.
* resolve (формы).
* filter.

#### Вложенные объекты, обращения через точку

Связь полей формы с полями выборки и полями операции.

Точка, звездочка точка.

Связь столбцов таблицы с полями выборки.

Связь полей фильтров с фильтрами выборки.

#### Сохранение на уровне localstorage

На данный момент промежуточное состояние необходимо сохранять на back.

#### Маршрутизация

Корень страницы: application.menu
open-page route - внутренний маршрут (относительно текущей позиции)


